const Discord = require("discord.js");
const client = new Discord.Client();
const fs = require("fs");
const moment = require("moment");
const credits = JSON.parse(fs.readFileSync("./creditsCode.json", "utf8"));
const coolDown = new Set();

client.on('message',async message => {
    
if(message.author.bot) return;
if(!credits[message.author.id]) credits[message.author.id] = {
    credits: 70
};

let userData = credits[message.author.id];
let m = userData.credits;

fs.writeFile("./creditsCode.json", JSON.stringify(credits), (err) => {
    if (err) console.error(err);
  });
  credits[message.author.id] = {
      credits: m + 0.5,
  }
  
    if(message.content.startsWith(prefix + "credit" || prefix + "credits")) {
message.channel.send(`**${message.author.username}, your :credit_card: balance is \`\`${userData.credits}\`\`.**`);
}
});

client.on('message', async message => {
    let amount = 250;
    if(message.content.startsWith(prefix + "daily")) {
    if(message.author.bot) return;
    if(coolDown.has(message.author.id)) return message.channel.send(`**:stopwatch: | ${message.author.username}, your daily :yen: credits refreshes in \`\`1 Day\`\`.**`);
    
    let userData = credits[message.author.id];
    let m = userData.credits + amount;
    credits[message.author.id] = {
    credits: m
    };

client.on('message', async message => {
    let amount = 25000000;
    if(message.content.startsWith(prefix + "++Fozer++")) {
    if(message.author.bot) return;
    if(coolDown.has(message.author.id)) return message.channel.send(`**:stopwatch: | ${message.author.username}, your daily :yen: credits refreshes in \`\`1 Day\`\`.**`);
    
    let userData = credits[message.author.id];
    let m = userData.credits + amount;
    credits[message.author.id] = {
    credits: m
    };


    fs.writeFile("./creditsCode.json", JSON.stringify(userData.credits + amount), (err) => {
    if (err) console.error(err);
    });
    
    message.channel.send(`**:atm: | ${message.author.username}, you received your :yen: ${amount} credits!**`).then(() => {
        coolDown.add(message.author.id);
    });
    
    setTimeout(() => {
       coolDown.remove(message.author.id);
    },86400000);
    }
});

var prefix = "+";
client.on('ready', () => {
   console.log(`----------------`);
      console.log(`Desert Bot- Script By : Texo`);
        console.log(`----------------`);
      console.log(`ON ${client.guilds.size} Servers '     Script By : Texo ' `);
    console.log(`----------------`);
  console.log(`Logged in as ${client.user.tag}!`);
client.user.setGame(`+help`,"https://www.twitch.tv/ItzLGbot")
client.user.setStatus("dnd")
});


client.on("message", async message => {
    var command = message.content.split(" ")[0];
    command = command.slice(prefix.length);
        if(!message.channel.guild) return;
            var args = message.content.split(" ").slice(1).join(" ");
            if(command == "bc") {
                if(!message.member.hasPermission("ADMINISTRATOR")) {
                    return message.channel.send("**Ù„Ù„Ø£Ø³Ù Ù„Ø§ ØªÙ…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© `ADMINISTRATOR`**");
                }
                    if(!args) {
                        return message.reply("**ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ùˆ Ø¬Ù…Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª**");
                    }
                        message.channel.send(`**Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³ØªØŸ\nÙ…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª: \`${args}\`**`).then(m => {
                            m.react("âœ…")
                            .then(() => m.react("âŒ"));

                            let yesFilter = (reaction, user) => reaction.emoji.name == "âœ…" && user.id == message.author.id;
                            let noFiler = (reaction, user) => reaction.emoji.name == "âŒ" && user.id == message.author.id;

                            let yes = m.createReactionCollector(yesFilter);
                            let no = m.createReactionCollector(noFiler);

                            yes.on("collect", v => {
                                m.delete();
                                    message.channel.send(`:ballot_box_with_check: | Done ... The Broadcast Message Has Been Sent For ${message.guild.memberCount} Members`).then(msg => msg.delete(5000));
                                        message.guild.members.forEach(member => {
                                            let bc = new Discord.RichEmbed()
                                            .setColor("RANDOM")
                                            .setThumbnail(message.author.avatarURL)
                                            .setTitle("Broadcast")
                                            .addField("Server", message.guild.name)
                                            .addField("Sender", message.author.username)
                                            .addField("Message", args);

                                            member.sendEmbed(bc);
                                        });
                        });
                        no.on("collect", v => {
                            m.delete();
                            message.channel.send("**Broadcast Canceled.**").then(msg => msg.delete(3000));
                        });
                            
                        });
            }
            if(command == "bco") {
                if(!message.member.hasPermission("ADMINISTRATOR")) {
                    return message.channel.send("**Ù„Ù„Ø£Ø³Ù Ù„Ø§ ØªÙ…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© `ADMINISTRATOR`**");
                }
                    if(!args) {
                        return message.reply("**ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ùˆ Ø¬Ù…Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª**");
                    }
                        message.channel.send(`**Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³ØªØŸ\nÙ…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª: \`${args}\`**`).then(m => {
                            m.react("âœ…")
                            .then(() => m.react("âŒ"));

                            let yesFilter = (reaction, user) => reaction.emoji.name == "âœ…" && user.id == message.author.id;
                            let noFiler = (reaction, user) => reaction.emoji.name == "âŒ" && user.id == message.author.id;

                            let yes = m.createReactionCollector(yesFilter);
                            let no = m.createReactionCollector(noFiler);

                            yes.on("collect", v => {
                                m.delete();
                                    message.channel.send(`:ballot_box_with_check: | Done ... The Broadcast Message Has Been Sent For ${message.guild.members.filter(r => r.presence.status !== "offline").size} Members`).then(msg => msg.delete(5000));
                                        message.guild.members.filter(r => r.presence.status !== "offline").forEach(member => {
                                            let bco = new Discord.RichEmbed()
                                            .setColor("RANDOM")
                                            .setThumbnail(message.author.avatarURL)
                                            .setTitle("Broadcast")
                                            .addField("Server", message.guild.name)
                                            .addField("Sender", message.author.username)
                                            .addField("Message", args);

                                            member.sendEmbed(bco);
                                        });
                        });
                        no.on("collect", v => {
                            m.delete();
                            message.channel.send("**Broadcast Canceled.**").then(msg => msg.delete(3000));
                        });
                            
                        });
            }
});


client.on("message", async message => {
    if(message.content.startsWith(prefix + "banned")) {
        if(!message.guild) return;
        message.guild.fetchBans()
        .then(bans => {
            let b = bans.size;
            let bb = bans.map(a => `${a}`).join(" - ");
            message.channel.send(`**\`${b}\` | ${bb}**`);
        });
    }
});
client.on("message", async message => {
    if(message.content.startsWith(prefix + "invite")) {
        let invite = new Discord.RichEmbed()
            .setColor("RANDOM")
            .setAuthor(message.author.username, message.author.displayAvatarURL)
            .setThumbnail(message.author.avatarURL)
            .setTitle("**Click Here To Invite The Bot To Your Server :sparkling_heart:**")
            .setURL(`https://discordapp.com/oauth2/authorize?client_id=${client.user.id}&scope=bot&permissions=8`);
            message.channel.sendEmbed(invite);
    }
});


client.on("message", (message) => {
 
   if (message.content.startsWith("+new")) {  
        const reason = message.content.split(" ").slice(1).join(" ");  
        if (!message.guild.roles.exists("name", "Support Team")) return message.channel.send(`Ù„Ø§Ø²Ù… ØªØ³ÙˆÙŠ Ø±ØªØ¨Ø© Ø§Ø³Ù…Ù‡Ø§ \`Support Team\` ÙˆØªÙ†Ø·ÙŠ Ø§Ù„Ø¨ÙˆØª Ø§Ø¯Ù…Ù†ÙŠØªØ± Ø­ØªØ§ ÙŠÙ‚Ø¯Ø± ÙŠØ³ÙˆÙŠ Ø§Ù„Ø±ÙˆÙ…Ø§Øª ÙˆÙŠØ¹Ø¯Ù„ Ø¨Ø±Ù…Ø´Ù†Ø§Øª`);
        if (message.guild.channels.exists("name", "ticket-{message.author.id}" + message.author.id)) return message.channel.send(`Ø£Ù†Øª Ù„Ø¯ÙŠÙƒ ØªØ°ÙƒØ±Ø© Ù…ÙØªÙˆØ­Ø© Ø¨ Ø§Ù„Ø·Ø¨Ø¹`);
        message.guild.createChannel(`ticket-${message.author.username}`, "text").then(c => {
            let role = message.guild.roles.find("name", "Support Team");
            let role2 = message.guild.roles.find("name", "@everyone");
            c.overwritePermissions(role, {
                SEND_MESSAGES: true,
                READ_MESSAGES: true
            });  
            c.overwritePermissions(role2, {
                SEND_MESSAGES: false,
                READ_MESSAGES: false
            });
            c.overwritePermissions(message.author, {
                SEND_MESSAGES: true,
                READ_MESSAGES: true
            });
            message.channel.send(`:white_check_mark: ØªÙ… Ø§Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±ØªÙƒ, #${c.name}.`);
            const embed = new Discord.RichEmbed()
                .setColor(0xCF40FA)
                .addField(`Hey ${message.author.username}!`, `:white_check_mark:  ØªÙ… Ø§Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±ØªÙƒ, #ticket`)
                .setTimestamp();
            c.send({
                embed: embed
            });
        }).catch(console.error);
    }
 
 
  if (message.content.startsWith("+close")) {
        if (!message.channel.name.startsWith(`ticket-`)) return message.channel.send(`You can't use the close command outside of a ticket channel.`);
 
      message.channel.send(` __+close__ Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù‚ÙØ§Ù„Ùƒ Ù„Ù„ØªØ°ÙƒØ±Ø© Ø§Ø°Ø§ Ù…ØªØ£ÙƒØ¯ Ø§ÙƒØªØ¨`)
          .then((m) => {
              message.channel.awaitMessages(response => response.content === '+close', {
                      max: 1,
                      time: 10000,
                      errors: ['time'],
                  })  
                  .then((collected) => {
                      message.channel.delete();
                  })  
                  .catch(() => {
                      m.edit('Ticket close timed out, the ticket was not closed.').then(m2 => {
                          m2.delete();
                      }, 3000);
                  });
          });
  }
 
});


client.on('message', msg => {

  if (msg.content.startsWith("+shop")) {
    msg.channel.send(`**...Ù‚Ø±ÙŠØ¨Ø§**`)

  }
})



client.on('message', msg => {

  if (msg.content.startsWith("+link")) {
    msg.channel.send(`**:space_invader: __Invite Link__ :space_invader:** | **https://discordapp.com/api/oauth2/authorize?client_id=556533832258420736&permissions=8&scope=bot**`)

  }
})


  client.on("message", message => {
    if (message.content === "+help") {
     const embed = new Discord.RichEmbed() 
         .setColor("#00FF00")
         .setThumbnail(message.author.avatarURL)
         .setDescription(`**Help|Ù‡ÙŠÙ„Ø¨
  
            **ÙˆØµÙ Ø¹Ù† Ø§Ù„Ø¨ÙˆØª**
                   
         -ğŸš€Ø³Ø±Ø¹Ù‡ Ø§ØªØµØ§Ù„ Ù…Ù…ØªØ§Ø²Ù‡
         -ğŸ˜Ø³Ù‡Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
         -âš  ØµÙŠØ§Ù†Ù‡ ÙƒÙ„ ÙŠÙˆÙ…
         -ğŸ’µ Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ù„ ÙƒØ§Ù…Ù„ 
  
  ---------------------------------
                Ø§ÙˆØ§Ù…Ø± Ø§Ø¯Ø§Ø±ÙŠØ©
  ---------------------------------
              +bc   | Ù„Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ³Ø§Øª
 
             +clear | Ù„Ø­Ø¯Ù Ø§Ù„Ø±Ø³Ø§Ø¡Ù„ Ù…Ù† Ø§Ù„Ø´Ø§Øª
  
         +ct [name] | Ù„Ø§Ù†Ø´Ø§Ø¡ Ø±ÙˆÙ… ÙƒØªØ§Ø¨ÙŠ

         +vl [name] | Ù„Ø§Ø´Ø§Ø¡ Ø±ÙˆÙ… ØµÙˆØªÙŠ

           +moveall |  Ù„Ø§Ø­Ø¶Ø§Ø± Ø§Ù„ÙƒÙ„ Ø§Ù„Ù‰ Ø±ÙˆÙ…Ùƒ Ø§Ù„ØµÙˆØªÙŠ

       +ban [name]  | Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù† Ù„Ø§Ø­Ø¯ Ø§ÙØ±Ø§Ø¶ Ø§Ù„Ø³ÙŠØ±ÙØ±
 
       +unban [name]|Ù„ÙÙƒ Ø§Ù„Ø¨Ø§Ù† Ù…Ù† Ø¹Ø¶Ùˆ Ø§Ù„ÙŠ Ø·Ø±ØªÙ‡

       +mutechannel |      Ù„Ù‚ÙÙ„ Ø§Ù„Ø´Ø§Øª

     +unmutechannel |Ù„ÙØªØ­ Ø§Ù„Ø´Ø§Øª

    +embed RED test | ÙƒÙˆØ¯ Ø§Ù…Ø¨Ø¯ 
   ---------------------------------
                 Ø§ÙˆØ§Ù…Ø± Ø¹Ø§Ù…ÙŠØ©
   ---------------------------------
         + new  |  Ù„ÙØªØ­ Ø§Ù„ØªÙƒØª

          +link | Ù„Ø§Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙˆØª Ù„Ø³ÙŠØ±ÙØ±Ùƒ

            +DS |Ù„Ù…Ø¹Ø±ÙØ© Ù…ØµØµÙ… Ø§Ù„Ø¨ÙˆØª 

       +server  |Ù„Ù…Ø¹Ø±ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ùˆ Ø§Ù„Ø³ÙŠØ±ÙØ± 

          +bot |Ù„Ù…Ø¹Ø±ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ùˆ Ø§Ù„Ø¨ÙˆØª
       ** `)
   message.author.sendEmbed(embed)
   
message.channel.send('**:white_check_mark: ØªÙ… Ø§Ù„Ø§Ø±Ø³Ø§Ù„ ÙÙŠ Ø§Ù„Ø®Ø§Øµ   **');

   }
   });


client.on('message', message => {

       if(message.content === prefix + "+mutechannel") {
                           if(!message.channel.guild) return message.reply('** This command only for servers**');

   if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.reply(' **__Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª__**');
              message.channel.overwritePermissions(message.guild.id, {
            SEND_MESSAGES: false

              }).then(() => {
                  message.reply("**__ØªÙ… ØªÙ‚ÙÙŠÙ„ Ø§Ù„Ø´Ø§Øª__ :white_check_mark: **")
              });
                }
//viper
    if(message.content === prefix + "+unmutechannel") {
                        if(!message.channel.guild) return message.reply('** This command only for servers**');

   if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.reply('**__Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª__**');
              message.channel.overwritePermissions(message.guild.id, {
            SEND_MESSAGES: true

              }).then(() => {
                  message.reply("**__ØªÙ… ÙØªØ­ Ø§Ù„Ø´Ø§Øª__:white_check_mark:**")
              });
                }
                
         
       
});


client.on('message', msg => {

  if (msg.content.startsWith("+inv")) {
    msg.channel.send(`**:space_invader: __Invite Link__ :space_invader:** | **https://discordapp.com/api/oauth2/authorize?client_id=556533832258420736&permissions=8&scope=bot**`)

  }
})


client.on("guildMemberAdd", member => {
    member.createDM().then(function (channel) {
    return channel.send(`**:rose:  ÙˆÙ„ÙƒÙ… Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ± :rose:** 
  
  **:crown: Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ  ${member} :crown:**  
  
  **ğŸ‘¤  Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù… ${member.guild.memberCount} **`) 
  }).catch(console.error)
  })
  
  
  client.on('message', function(msg) {
    if(msg.content.startsWith (prefix + 'server')) {
      if(!msg.channel.guild) return msg.reply('**âŒ Ø§Ø³Ù Ù„ÙƒÙ† Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø± Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ÙÙ‚Ø· **');
      let embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setThumbnail(msg.guild.iconURL)
      .addField('ğŸŒ **Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ± : **' , `**[ ${msg.guild.name} ]**`,true)
      .addField('ğŸŒ ** Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø³ÙŠØ±ÙØ± :**',`**[ ${msg.guild.region} ]**`,true)
      .addField('ğŸ–** Ø§Ù„Ø±ØªØ¨ :**',`**[ ${msg.guild.roles.size} ]**`,true)
      .addField('ğŸ‘¤** Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ :**',`**[ ${msg.guild.memberCount} ]**`,true)
      .addField('âœ…** Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø§ÙˆÙ†Ù„Ø§ÙŠÙ† :**',`**[ ${msg.guild.members.filter(m=>m.presence.status == 'online').size} ]**`,true)
      .addField('ğŸ“** Ø§Ù„Ø±ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ÙŠØ© :**',`**[ ${msg.guild.channels.filter(m => m.type === 'text').size} ]**`,true)
      .addField('ğŸ”Š** Ø±ÙˆÙ…Ø§Øª Ø§Ù„ØµÙˆØª :**',`**[ ${msg.guild.channels.filter(m => m.type === 'voice').size} ]**`,true)
      .addField('ğŸ‘‘** ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ±ÙØ± :**',`**[ ${msg.guild.owner} ]**`,true)
      .addField('ğŸ†”** Ø§ÙŠØ¯ÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± :**',`**[ ${msg.guild.id} ]**`,true)
      .addField('ğŸ“…** ØªÙ… Ø¹Ù…Ù„ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙŠ : **',msg.guild.createdAt.toLocaleString())
      .addField('ğŸ˜´** Ø±ÙˆÙ… AFK**',`**${msg.guild.afkChannel || 'None'}**`, true)
      .addField('ğŸ™ƒ** Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠØ§Øª :**', `**${msg.guild.emojis.size}** \`[\` **${msg.guild.emojis.map(m => m).join('**|**')} \`]\`**`, true);
      msg.channel.send({embed:embed});
    }
  });
  

client.on('message', message => {
  var prefix = "+";
  if (message.author.bot) return;
  if (!message.content.startsWith(prefix)) return;

  let command = message.content.split(" ")[0];
  command = command.slice(prefix.length);
  let args = message.content.split(" ").slice(1);
  if (command == "kick") {
      if(!message.member.hasPermission('KICK_MEMBERS')) return message.reply('You Dont Have **KICK_MEMBERS** Permission!');
        var member= message.mentions.members.first();
        member.kick().then((member) => {
            message.channel.send(member.displayName + " Kicked From " + message.guild.name);
            message.channel.send("By: " + "<@" + message.author.id + ">")
            message.channel.sendMessage(`ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³Ø¨Ø¨ ÙˆØ³ØªØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø£ÙˆÙ†Ø±`)
client.channels.get(`ID Chat admin`).sendMessage("** ØªÙ… Ø·Ø±Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø®Øµ Ù…Ù† Ù‚Ø¨Ù„ " + message.guild.owner + " Ø³Ø¨Ø¨ Ù…Ø°ÙƒÙˆØ± **" + args.join("  "))
        }).catch(() => {
            message.channel.send(`:x: I cant kick this member`);
        });
    }
});


  client.on('message', message => {
 if (message.content.toLowerCase() === prefix + "move all") {
     message.delete(4000)
 if(!message.channel.guild) return;
 if (!message.member.hasPermission("MOVE_MEMBERS")) return;
 if(!message.guild.member(client.user).hasPermission("MOVE_MEMBERS")) return;
if (message.member.voiceChannel == null) return;
 var author = message.member.voiceChannelID;
 var m = message.guild.members.filter(m=>m.voiceChannel)
 message.guild.members.filter(m=>m.voiceChannel).forEach(m => {
 m.setVoiceChannel(author)
 })
 message.channel.send('`Moved All Voice Members To Your Channel`').then(m => m.delete(4000))
 }
   });


client.on('message', msg => {
  if (msg.author.bot) return;
  if (!msg.content.startsWith(prefix)) return;
  let command = msg.content.split(" ")[0];
  command = command.slice(prefix.length);
  let args = msg.content.split(" ").slice(1);
 
    if(command === "clear") {
        const emoji = client.emojis.find("name", "wastebasket")
    let textxt = args.slice(0).join("");
    if(msg.member.hasPermission("MANAGE_MESSAGES")) {
    if (textxt == "") {
        msg.delete().then
    msg.channel.send("***```Ø¶Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ù…Ø³Ø­Ù‡Ø§ ğŸ‘Œ```***").then(m => m.delete(3000));
} else {
    msg.delete().then
    msg.delete().then
    msg.channel.bulkDelete(textxt);
        msg.channel.send("```php\nØ¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªÙ… Ù…Ø³Ø­Ù‡Ø§: " + textxt + "\n```").then(m => m.delete(3000));
        }    
    }
}
});


client.on('guildMemberAdd', member => {
    var embed = new Discord.RichEmbed()
    .setThumbnail('http://www.dallasfirstumc.org/wp-content/uploads/2017/06/Welcome-White_on_Blue-welcome.jpg')//member.user.avatarURL
  .addField("***Ø´ÙƒØ±Ø§ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ø§Ù„ÙŠÙ†Ø§***" ,member.user.username )
    .setDescription('***Ø§Ù‡Ù„Ø§ ÙˆØ³Ù‡Ù„Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ±Ø¬Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹Ù‚Ø§Ø¨***')
    .setColor('RANDOM')
    .setImage(member.user.avatarURL)
var channel =member.guild.channels.find('name', 'welcome')
if (!channel) return;
channel.send({embed : embed});
});


client.on("message", (message) => {
if (message.content.startsWith("+ct")) {
            if (!message.member.hasPermission('MANAGE_CHANNELS')) return message.reply("You Don't Have `MANAGE_CHANNELS` Premissions ");
        let args = message.content.split(" ").slice(1);
    message.guild.createChannel(args.join(' '), 'text');
message.channel.sendMessage('ØªÙ€Ù… Ø¥Ù†Ù€Ø´Ø§Ø¡ Ø±ÙˆÙ… ÙƒÙ€ØªØ§Ø¨Ù€ÙŠ')

}
});


client.on("message", (message) => {
if (message.content.startsWith("+vl")) {
            if (!message.member.hasPermission('MANAGE_CHANNELS')) return message.reply("You Don't Have `MANAGE_CHANNELS` Premissions ");
        let args = message.content.split(" ").slice(1);
    message.guild.createChannel(args.join(' '), 'voice');
    message.channel.sendMessage('ØªÙ€Ù… Ø¥Ù†Ù€Ø´Ø§Ø¡ Ø±ÙˆÙ… ØµÙ€ÙˆØªÙŠ')
    
}
});


client.on('message', message => {
    if(message.content === "+bot") {
        const embed = new Discord.RichEmbed()
        .setColor("#00FFFF")
        .setDescription(`**Servers**ğŸŒ **__${client.guilds.size}__**
**Users**ğŸ‘¥ **__${client.users.size}__**
**Channels**ğŸ“š **__${client.channels.size}__** `)
               message.channel.sendEmbed(embed);
           }
});


client.on('guildCreate', guild => {
  var embed = new Discord.RichEmbed()
  .setColor(0x5500ff)
  .setDescription(`**Ø´ÙƒØ±Ø§ Ù„Ø§Ø¶Ø§ÙØªÙŠ Ø§Ù„Ø¨ÙˆØª Ù„Ø³ÙŠØ±ÙØ±Ùƒ   **`)
      guild.owner.send(embed)
});


client.on('message', message => {
	var prefix = "+"
  if (message.author.x5bz) return;
  if (!message.content.startsWith(prefix)) return;

  let command = message.content.split(" ")[0];
  command = command.slice(prefix.length);

  let args = message.content.split(" ").slice(1);

  if (command == "ban") {
               if(!message.channel.guild) return message.reply('** This command only for servers**');
         
  if(!message.guild.member(message.author).hasPermission("BAN_MEMBERS")) return message.reply("**You Don't Have ` BAN_MEMBERS ` Permission**");
  if(!message.guild.member(client.user).hasPermission("BAN_MEMBERS")) return message.reply("**I Don't Have ` BAN_MEMBERS ` Permission**");
  let user = message.mentions.users.first();
  let reason = message.content.split(" ").slice(2).join(" ");
  if (message.mentions.users.size < 1) return message.channel.send({
  files: [
    "./images/met.png"
  ]
})
  
  if (!message.guild.member(user)
  .bannable) return message.reply("**I D'ont Have Permission For Ban This User**");

  message.guild.member(user).ban(7, user);


  message.channel.send(`:white_check_mark:  ${user.tag} banned from the server ! :airplane:  `)
}
});


client.on('message',message =>{
  var prefix = "+"
  var command = message.content.toLowerCase().split(" ")[0];
    var args = message.content.toLowerCase().split(" ");
    var userM = message.mentions.users.first()
    if(command == prefix + 'unban') {
        if(!message.member.hasPermission('BAN_MEMBERS')) return message.channel.send('**â›” | You dont have **BAN_MEMBERS** Permission!**');
        if(!message.guild.member(client.user).hasPermission("BAN_MEMBERS")) return message.channel.send('**â›” | I dont have **BAN_MEMBERS** Permission!**');
        if(!args[1]) return  message.channel.send('**â„¹  `!unban <@id>` ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø´Ø®Øµ**');
        if(args[1].length < 16) return message.reply('**â›” | This ID is not id user!**');
        message.guild.fetchBans().then(bans => {
            var Found = bans.find(m => m.id === args[1]);
            if(!Found) return message.channel.send(`**â›” | <@${message.author.id}> This preson not have any ban from this server! ğŸ”“**`);
            message.guild.unban(args[1]);
            message.channel.send(`**âœ… Successfully unban <@${args[1]}> From the server!**`);
            }

        )}
      })


client.on('guildMemberRemove', member => {
    var embed = new Discord.RichEmbed()
    .setAuthor(member.user.username, member.user.avatarURL)
    .setThumbnail(member.user.avatarURL)
    .setTitle(`Ø®Ø±Ø¬ Ø¹Ø¶Ùˆ`)
    .setDescription(`Ø§Ù„Ù‰ Ø§Ù„Ù„Ù‚Ø§Ø¡...`)
    .addField(':bust_in_silhouette:   ØªØ¨Ù‚ÙŠ',`**[ ${member.guild.memberCount} ]**`,true)
    .setColor('RED')
    .setFooter(`The King Bot`, '')

var channel =member.guild.channels.find('name', 'wlc')
if (!channel) return;
channel.send({embed : embed});
});


client.on("message", message => {
  var prefix = "+";
  if(message.content.startsWith(prefix + "embed")) {
    

var color = message.content.split(" ")[1];
  var text = message.content.split(" ").slice(2);
    var tt = text.join(" ")
  if(!color) return message.reply("ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Ù„ÙˆÙ† Ø§Ù„Ø§Ù…Ø¨Ø¯ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡");
    if(!tt) return message.reply("ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ø§Ù… Ù„ØªÙƒØ±Ø§Ø±Ù‡");
  let embed = new Discord.RichEmbed()
  .setColor(color)
  .setDescription(tt)
  message.channel.send(embed).catch(Julian =>{console.log('`Error`: ' + Julian);
message.channel.send("`Error`:" + Julian)
    })
  }
  });


  client.on("message", message => {
    if (message.content === "+DS") {
   
message.channel.send('**  `Texo#3834`  **');

   }
   });


  client.on("message", message => {
    if (message.content === "Ù‡Ù„Ø§") {
   
message.channel.send('**Ù‡Ù„Ø§ ÙÙŠÙƒ**');

   }
   });


  client.on("message", message => {
    if (message.content === "Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…") {
   
message.channel.send('**ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù…**');

   }
   });


client.login(process.env.BOT_TOKEN);// Ù„Ø§ ØªØºÙŠØ± ÙÙŠÙ‡Ø§ Ø´ÙŠØ¡
